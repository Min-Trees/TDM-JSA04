<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Products Loading</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
        }
        h1 {
            color: #667eea;
        }
        .info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 5px;
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #5568d3;
        }
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .product-card {
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 5px;
        }
        .product-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 5px;
        }
        pre {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Test Products Loading</h1>
        
        <div class="section">
            <h2>B∆∞·ªõc 1: Ki·ªÉm tra localStorage</h2>
            <button onclick="checkStorage()">Ki·ªÉm tra d·ªØ li·ªáu</button>
            <button onclick="clearStorage()">X√≥a t·∫•t c·∫£ d·ªØ li·ªáu</button>
            <div id="storage-info"></div>
        </div>

        <div class="section">
            <h2>B∆∞·ªõc 2: Th√™m s·∫£n ph·∫©m test</h2>
            <button onclick="addTestProduct()">Th√™m s·∫£n ph·∫©m Kamen Rider</button>
            <button onclick="addTestBeyblade()">Th√™m s·∫£n ph·∫©m Beyblade</button>
            <button onclick="addTestNinjago()">Th√™m s·∫£n ph·∫©m Ninjago</button>
            <div id="add-result"></div>
        </div>

        <div class="section">
            <h2>B∆∞·ªõc 3: Test load s·∫£n ph·∫©m</h2>
            <button onclick="testLoadKamenRider()">Load Kamen Rider</button>
            <button onclick="testLoadBeyblade()">Load Beyblade</button>
            <button onclick="testLoadNinjago()">Load Ninjago</button>
            
            <h3>Kamen Rider Geats:</h3>
            <div class="products-grid" id="test-geats-grid"></div>
            
            <h3>Beyblade Burst:</h3>
            <div class="products-grid" id="test-burst-grid"></div>
            
            <h3>Ninjago MOS:</h3>
            <div class="products-grid" id="test-mos-grid"></div>
        </div>
    </div>

    <script src="products-loader.js"></script>
    <script>
        function checkStorage() {
            const allProducts = JSON.parse(localStorage.getItem('allProducts') || '[]');
            const info = document.getElementById('storage-info');
            
            info.innerHTML = `
                <div class="info">
                    <h3>Th√¥ng tin localStorage:</h3>
                    <p><strong>T·ªïng s·ªë s·∫£n ph·∫©m:</strong> ${allProducts.length}</p>
                    <pre>${JSON.stringify(allProducts, null, 2)}</pre>
                </div>
            `;
        }

        function clearStorage() {
            if (confirm('X√≥a t·∫•t c·∫£ d·ªØ li·ªáu?')) {
                localStorage.clear();
                alert('ƒê√£ x√≥a t·∫•t c·∫£ d·ªØ li·ªáu!');
                location.reload();
            }
        }

        function addTestProduct() {
            let allProducts = JSON.parse(localStorage.getItem('allProducts') || '[]');
            
            const testProduct = {
                id: 'test_kr_' + Date.now(),
                name: 'Test Kamen Rider Geats DX Belt',
                price: '500000',
                category: 'kamenrider-geats',
                image: 'https://via.placeholder.com/300x300/667eea/ffffff?text=Test+KR',
                description: 'S·∫£n ph·∫©m test Kamen Rider'
            };
            
            allProducts.push(testProduct);
            localStorage.setItem('allProducts', JSON.stringify(allProducts));
            
            // Also save to category
            const geatsProducts = allProducts.filter(p => p.category === 'kamenrider-geats');
            localStorage.setItem('geatsProducts', JSON.stringify(geatsProducts));
            
            document.getElementById('add-result').innerHTML = 
                '<div class="info">‚úÖ ƒê√£ th√™m s·∫£n ph·∫©m Kamen Rider test!</div>';
            
            checkStorage();
        }

        function addTestBeyblade() {
            let allProducts = JSON.parse(localStorage.getItem('allProducts') || '[]');
            
            const testProduct = {
                id: 'test_bb_' + Date.now(),
                name: 'Test Beyblade Burst Xcalibur',
                price: '300000',
                category: 'beyblade-burst',
                image: 'https://via.placeholder.com/300x300/ff6b6b/ffffff?text=Test+BB',
                description: 'S·∫£n ph·∫©m test Beyblade'
            };
            
            allProducts.push(testProduct);
            localStorage.setItem('allProducts', JSON.stringify(allProducts));
            
            const burstProducts = allProducts.filter(p => p.category === 'beyblade-burst');
            localStorage.setItem('burstProducts', JSON.stringify(burstProducts));
            
            document.getElementById('add-result').innerHTML = 
                '<div class="info">‚úÖ ƒê√£ th√™m s·∫£n ph·∫©m Beyblade test!</div>';
            
            checkStorage();
        }

        function addTestNinjago() {
            let allProducts = JSON.parse(localStorage.getItem('allProducts') || '[]');
            
            const testProduct = {
                id: 'test_nj_' + Date.now(),
                name: 'Test Ninjago Lloyd Minifigure',
                price: '200000',
                category: 'ninjago-mos',
                image: 'https://via.placeholder.com/300x300/4ecdc4/ffffff?text=Test+NJ',
                description: 'S·∫£n ph·∫©m test Ninjago'
            };
            
            allProducts.push(testProduct);
            localStorage.setItem('allProducts', JSON.stringify(allProducts));
            
            const mosProducts = allProducts.filter(p => p.category === 'ninjago-mos');
            localStorage.setItem('mosProducts', JSON.stringify(mosProducts));
            
            document.getElementById('add-result').innerHTML = 
                '<div class="info">‚úÖ ƒê√£ th√™m s·∫£n ph·∫©m Ninjago test!</div>';
            
            checkStorage();
        }

        function testLoadKamenRider() {
            loadProductsFromStorage('geatsProducts', 'test-geats-grid');
        }

        function testLoadBeyblade() {
            loadProductsFromStorage('burstProducts', 'test-burst-grid');
        }
        function testLoadNinjago() {
            loadProductsFromStorage('mosProducts', 'test-mos-grid');
        }

        // Auto check on load
        window.addEventListener('DOMContentLoaded', checkStorage);
    </script>
</body>
</html>